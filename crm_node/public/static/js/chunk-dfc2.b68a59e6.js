(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-dfc2"],{"3V1f":function(e,t,i){"use strict";i.d(t,"G",function(){return a}),i.d(t,"v",function(){return l}),i.d(t,"D",function(){return n}),i.d(t,"B",function(){return r}),i.d(t,"y",function(){return s}),i.d(t,"t",function(){return o}),i.d(t,"z",function(){return c}),i.d(t,"w",function(){return u}),i.d(t,"A",function(){return p}),i.d(t,"C",function(){return d}),i.d(t,"F",function(){return m}),i.d(t,"H",function(){return b}),i.d(t,"x",function(){return f}),i.d(t,"E",function(){return h}),i.d(t,"u",function(){return v}),i.d(t,"m",function(){return y}),i.d(t,"h",function(){return g}),i.d(t,"o",function(){return x}),i.d(t,"n",function(){return _}),i.d(t,"k",function(){return $}),i.d(t,"s",function(){return w}),i.d(t,"r",function(){return T}),i.d(t,"c",function(){return z}),i.d(t,"e",function(){return E}),i.d(t,"f",function(){return R}),i.d(t,"j",function(){return S}),i.d(t,"b",function(){return k}),i.d(t,"q",function(){return L}),i.d(t,"d",function(){return F}),i.d(t,"i",function(){return O}),i.d(t,"a",function(){return C}),i.d(t,"p",function(){return D}),i.d(t,"g",function(){return V}),i.d(t,"l",function(){return N});var a=[{display_name:"table"},{display_name:"excel"}],l=[{display_name:"yyyyMMdd"},{display_name:"yyyyMMdd Kaa"}],n=[{display_name:"Asia/Manila"},{display_name:"Asia/Jakarta"}],r=[{display_name:"Y"},{display_name:"N"}],s=[{display_name:"Y"},{display_name:"N"}],o=[{label:"Left",value:"left"},{label:"Right",value:"right"}],c=[{label:"Y",value:"Y"},{label:"N",value:""}],u=[{display_name:"excel"},{display_name:"csv"}],p=[{label:"Y",value:"Y"},{label:"N",value:"N"}],d=[{label:"By Month",value:"MONTH"},{label:"By Week",value:"WEEK"},{label:"By Day",value:"DAY"}],m=[{label:"January",value:"1"},{label:"February",value:"2"},{label:"March",value:"3"},{label:"April",value:"4"},{label:"May",value:"5"},{label:"June",value:"6"},{label:"July",value:"7"},{label:"August",value:"8"},{label:"September",value:"9"},{label:"October",value:"10"},{label:"November",value:"11"},{label:"December",value:"12"}],b=[{label:"Monday",value:"2"},{label:"Tuesday",value:"3"},{label:"Wednesday",value:"4"},{label:"Thursday",value:"5"},{label:"Friday",value:"6"},{label:"Saturday",value:"7"},{label:"Sunday",value:"1"}];var f=function(){for(var e=[],t=0;t<24;t++)e[t]={value:t};return console.log(3,e),e}();var h=function(){for(var e=[],t=0;t<60;t++)e[t]={value:t,label:"0"+t};return e}(),v=[{label:"1st",value:"1"},{label:"2nd",value:"2"},{label:"3rd",value:"3"},{label:"4th",value:"4"},{label:"5th",value:"5"},{label:"6th",value:"6"},{label:"7th",value:"7"},{label:"8th",value:"8"},{label:"9th",value:"9"},{label:"10th",value:"10"},{label:"11th",value:"11"},{label:"12th",value:"12"},{label:"13th",value:"13"},{label:"14th",value:"14"},{label:"15th",value:"15"},{label:"16th",value:"16"},{label:"17th",value:"17"},{label:"18th",value:"18"},{label:"19th",value:"19"},{label:"20th",value:"20"},{label:"21st",value:"21"},{label:"22nd",value:"22"},{label:"23rd",value:"23"},{label:"24th",value:"24"},{label:"25th",value:"25"},{label:"26th",value:"26"},{label:"27th",value:"27"},{label:"28th",value:"28"},{label:"29th",value:"29"},{label:"30th",value:"30"},{label:"31th",value:"31"}],y="/webapi/biz",g="/webapi/schedulereport/biz",x="/webapi/biz/publish",_="/webapi/biz/stop",$="/webapi/schedulereport/biz/getPhaseId",w="/webapi/schedulereport/table/biz",T="/webapi/schedulereport/biz/table",z="/webapi/schedulereport/table/biz",E="/webapi/schedulereport/style",R="/webapi/schedulereport/mail",S="/webapi/schedulereport/table",k="/webapi/schedulereport/table/column",L="/webapi/schedulereport/table/column",F="/webapi/schedulereport/biz/table/html",O="/webapi/schedulereport/biz",C="/webapi/schedulereport/biz/mail",D="/webapi/schedulereport/biz/mail",V="/webapi/schedulereport/excel/biz",N="/webapi/schedulereport/biz/excel"},"92sj":function(e,t,i){"use strict";var a=i("P2sY"),l=i.n(a),n=i("Ee2s"),r=i("3V1f"),s={name:"EmailRecipients",props:{bizType:{type:String,required:!0}},data:function(){return{list:null,loading:!1,temp:{bizType:this.bizType,mail:"",mailOrder:"",runtimeType:"dev"},textMap:{edit:"Edit",create:"Create"},dialogFormVisible:!1,dialogStatus:"update",rules:{mail:[{required:!0,message:"Please input Email",type:"email",trigger:"blur"}],mailOrder:[{required:!0,message:"Please input order",trigger:"blur"}]}}},created:function(){this.getRecipients()},methods:{getRecipients:function(){var e=this;console.log("env","dev"),this.loading=!0,Object(n.c)(r.i+"/"+this.bizType+"/env","dev").then(function(t){e.loading=!1,1===t.data.code?e.list=t.data.data:e.$alert("Get Email Recipients Error: "+t.data.msg)}).catch(function(t){e.$alert("Get Email Recipients Error: "+t)})},handleCreate:function(){var e=this;this.dialogFormVisible=!0,this.dialogStatus="create",this.temp.mail="",this.temp.mailOrder="",this.temp.runtimeType="dev",this.temp.bizType=this.bizType,this.temp.isValid="",this.$nextTick(function(){e.$refs.dataForm.clearValidate()})},createData:function(){var e=this;this.$refs.dataForm.validate(function(t){if(t){var i=l()({},e.temp);delete i.id,e.loading=!0,Object(n.d)(r.p,i).then(function(t){e.loading=!1,1===t.data.code?(e.dialogFormVisible=!1,e.getRecipients(),e.$notify({title:"成功",message:"提交成功",type:"success",duration:2e3})):e.$notify({title:"失败",message:t.data.msg,type:"fail",duration:2e3})}).catch(function(t){e.dialogFormVisible=!1,e.$alert(t)})}else e.$notify({title:"失败",message:"请填写正确的提交信息",type:"fail",duration:2e3})})},handleEdit:function(e){this.dialogFormVisible=!0,this.dialogStatus="edit",this.temp.id=e.id,this.temp.bizType=e.bizType,this.temp.mail=e.mail,this.temp.runtimeType=e.runtimeType,this.temp.mailOrder=e.mailOrder,this.temp.isValid=e.isValid},updateData:function(){var e=this;this.$refs.dataForm.validate(function(t){if(t){var i=l()({},e.temp);e.loading=!0,Object(n.d)(r.p,i).then(function(t){e.loading=!1,1===t.data.code?(e.getRecipients(),e.dialogFormVisible=!1,e.$notify({title:"成功",message:"提交成功",type:"success",duration:2e3})):e.$notify({title:"失败",message:t.data.msg,type:"fail",duration:2e3})}).catch(function(t){e.dialogFormVisible=!1,e.$alert(t)})}else e.$notify({title:"失败",message:"请填写正确的提交信息",type:"fail",duration:2e3})})},handleDelete:function(e){var t=this;this.$confirm("Are you sure delete this recipient?","Tips",{confirmButtonText:"Confirm",cancelButtonText:"Cancle",type:"warning"}).then(function(){t.loading=!0,Object(n.a)(r.a,e.id).then(function(e){t.loading=!1,1===e.data.code?(t.getRecipients(),t.$notify({title:"成功",message:"删除成功",type:"success",duration:2e3})):t.$notify({title:"失败",message:e.data.msg,type:"error",duration:2e3})}).catch(function(e){t.$alert(e)})}).catch(function(e){})}}},o=i("KHd+"),c=Object(o.a)(s,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-container"},[i("div",{staticStyle:{margin:"5px 5px 5px 5px",padding:"20px 10px 10px 20px",border:"1px solid #E4E7ED"}},[i("el-row",[i("el-col",{attrs:{span:12}},[i("div",{staticStyle:{margin:"0 0 20px 15px"}},[e._v(e._s(e.$t("emailRecipients.emailRecipients")))])]),e._v(" "),i("el-col",{attrs:{span:12}},[i("div",{staticStyle:{"margin-right":"15px","margin-bottom":"15px"},attrs:{align:"right"}},[i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){e.handleCreate()}}},[e._v(e._s(e.$t("emailRecipients.add")))])],1)])],1),e._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.list,border:"","highlight-current-row":""}},[i("el-table-column",{attrs:{label:e.$t("emailRecipients.id"),width:"60px"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.id))])]}}])}),e._v(" "),i("el-table-column",{attrs:{label:e.$t("emailRecipients.mail")},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.mail))])]}}])}),e._v(" "),i("el-table-column",{attrs:{label:e.$t("emailRecipients.runtimeType")},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.runtimeType))])]}}])}),e._v(" "),i("el-table-column",{attrs:{label:e.$t("emailRecipients.mailOrder")},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.mailOrder))])]}}])}),e._v(" "),i("el-table-column",{attrs:{label:e.$t("emailRecipients.actions"),prop:"actions",align:"center","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{staticClass:"actionButton",attrs:{type:"danger",size:"mini",icon:"el-icon-delete"},on:{click:function(i){e.handleDelete(t.row)}}}),e._v(" "),i("el-button",{staticClass:"actionButton",attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(i){e.handleEdit(t.row)}}})]}}])})],1),e._v(" "),i("el-dialog",{attrs:{title:e.textMap[e.dialogStatus],visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[i("el-form",{ref:"dataForm",staticStyle:{width:"80%","margin-left":"20px"},attrs:{rules:e.rules,disabled:e.loading,model:e.temp,"label-position":"right","label-width":"25%"}},[i("el-form-item",{attrs:{label:e.$t("emailRecipients.mail"),prop:"mail"}},[i("el-input",{model:{value:e.temp.mail,callback:function(t){e.$set(e.temp,"mail",t)},expression:"temp.mail"}})],1),e._v(" "),i("el-form-item",{attrs:{label:e.$t("emailRecipients.mailOrder"),prop:"mailOrder"}},[i("el-input-number",{attrs:{min:0},model:{value:e.temp.mailOrder,callback:function(t){e.$set(e.temp,"mailOrder",t)},expression:"temp.mailOrder"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v(e._s(e.$t("email.cancel")))]),e._v(" "),"create"==e.dialogStatus?i("el-button",{attrs:{type:"primary"},on:{click:e.createData}},[e._v(e._s(e.$t("email.confirm")))]):i("el-button",{attrs:{type:"primary"},on:{click:e.updateData}},[e._v(e._s(e.$t("email.confirm")))])],1)],1)],1)])},[],!1,null,null,null);c.options.__file="EmailRecipients.vue";t.a=c.exports},Ee2s:function(e,t,i){"use strict";i.d(t,"b",function(){return o}),i.d(t,"d",function(){return c}),i.d(t,"a",function(){return u}),i.d(t,"c",function(){return p});var a=i("vDqi"),l=i.n(a),n=i("Qyje"),r=i.n(n),s={username:i("Q2AE").a.getters.email};function o(e,t){return l.a.get(e,{params:t,headers:s})}function c(e,t){return l.a.post(e,r.a.stringify(t),{headers:s})}function u(e,t){return l.a.delete(e+"/"+t,{headers:s})}function p(e,t){return l.a.get(e+"/"+t,{headers:s})}},HoLp:function(e,t,i){"use strict";i.r(t);var a=i("Ee2s"),l=i("3V1f"),n={name:"ExcelReportList",props:{bizType:{type:String,required:!0}},data:function(){return{list:null,modifiable:!0,listLoading:!1,temp:{id:"",bizType:this.bizType,excelFileName:"",fileType:"",attachmentDateformat:"",mailHtmlContent:"",excelReportSql:""},fileTypeOptions:l.w}},created:function(){this.getExcelReportList()},methods:{getExcelReportList:function(){var e=this;this.listLoading=!0,Object(a.c)(l.g,this.bizType).then(function(t){e.listLoading=!1,-101===t.data.code||1===t.data.code?(e.list=t.data.data,e.listLoading=!1,console.log("result excel",e.list),e.list&&(e.list.id&&(e.temp.id=e.list.id),e.temp.bizType=e.bizType,e.temp.excelFileName=e.list.excelFileName,e.temp.fileType=e.list.fileType,e.temp.attachmentDateformat=e.list.attachmentDateformat,e.temp.mailHtmlContent=e.list.mailHtmlContent,e.temp.excelReportSql=e.list.excelReportSql),e.listLoading=!1):e.$alert("Get Excellist Error: "+t.data.msg)}).catch(function(t){e.$alert("Get Excellist Error: "+t)})},handleEdit:function(){this.modifiable=!1},handleSubmit:function(){var e=this,t={bizType:this.temp.bizType,excelFileName:this.temp.excelFileName,fileType:this.temp.fileType,attachmentDateformat:this.temp.attachmentDateformat,mailHtmlContent:this.temp.mailHtmlContent,excelReportSql:this.temp.excelReportSql};this.temp.id&&(t.id=this.temp.id),console.log("excelData",t),Object(a.d)(l.l,t).then(function(t){e.listLoading=!1,console.log(66,t),1===t.data.code?(e.$notify({title:"成功",message:"提交成功",type:"success",duration:2e3}),e.getExcelReportList(),e.modifiable=!0):e.$notify({title:"失败",message:t.data.msg,type:"fail",duration:1e3})}).catch(function(t){console.log(t),e.listLoading=!1,e.$alert(t)})},sendEmail:function(){this.$notify({title:"发送中",message:"发送中",type:"info",duration:2e3}),Object(a.b)(l.f+"/"+this.temp.bizType,this.temp.bizType).then(function(e){}).catch(function(e){})}}},r=(i("ssmy"),i("KHd+")),s=Object(r.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-container"},[i("div",{staticStyle:{margin:"5px 5px 5px 5px",padding:"20px 20px 20px 20px",border:"1px solid #E4E7ED"}},[i("el-row",[i("el-col",{attrs:{span:12}},[i("div",{staticClass:"grid-content",staticStyle:{margin:"0 0 0 15px"}},[e._v(e._s(e.$t("tableReportList.reportList")))])]),e._v(" "),i("el-col",{attrs:{span:12,align:"middle"}},[i("div",{staticClass:"grid-content",attrs:{align:"right"}},[i("el-button",{attrs:{type:"primary"},on:{click:e.sendEmail}},[e._v("Send Test Email")])],1)])],1),e._v(" "),i("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{"margin-top":"10px"},attrs:{disabled:e.modifiable,"label-position":"right",inline:"","label-width":"130px"}},[i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:e.$t("excelReportList.bizType")}},[i("el-input",{attrs:{disabled:""},model:{value:e.temp.bizType,callback:function(t){e.$set(e.temp,"bizType",t)},expression:"temp.bizType"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:e.$t("excelReportList.excelFileName")}},[i("el-input",{model:{value:e.temp.excelFileName,callback:function(t){e.$set(e.temp,"excelFileName",t)},expression:"temp.excelFileName"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:e.$t("excelReportList.fileType")}},[i("el-select",{staticStyle:{width:"100%"},model:{value:e.temp.fileType,callback:function(t){e.$set(e.temp,"fileType",t)},expression:"temp.fileType"}},e._l(e.fileTypeOptions,function(e){return i("el-option",{key:e.display_name,attrs:{label:e.display_name,value:e.display_name}})}))],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:e.$t("excelReportList.attachmentDateformat")}},[i("el-input",{model:{value:e.temp.attachmentDateformat,callback:function(t){e.$set(e.temp,"attachmentDateformat",t)},expression:"temp.attachmentDateformat"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:24}},[i("el-form-item",{attrs:{label:e.$t("excelReportList.mailHtmlContent")}},[i("el-input",{attrs:{rows:4,type:"textarea"},model:{value:e.temp.mailHtmlContent,callback:function(t){e.$set(e.temp,"mailHtmlContent",t)},expression:"temp.mailHtmlContent"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:24}},[i("el-form-item",{attrs:{label:e.$t("excelReportList.excelReportSql")}},[i("el-input",{attrs:{rows:4,type:"textarea"},model:{value:e.temp.excelReportSql,callback:function(t){e.$set(e.temp,"excelReportSql",t)},expression:"temp.excelReportSql"}})],1)],1)],1)],1),e._v(" "),i("div",{staticClass:"button-group"},[i("el-button",{staticClass:"actionButton",attrs:{disabled:!e.modifiable,type:"primary",size:"mini"},on:{click:function(t){e.handleEdit()}}},[e._v(e._s(e.$t("tableReportList.edit")))]),e._v(" "),i("el-button",{staticClass:"actionButton",attrs:{disabled:e.modifiable,type:"primary",size:"mini"},on:{click:function(t){e.handleSubmit()}}},[e._v(e._s(e.$t("tableReportList.submit")))])],1)],1)])},[],!1,null,null,null);s.options.__file="ExcelReportList.vue";var o=s.exports,c={name:"EmailExcelView",components:{EmailRecipients:i("92sj").a,ExcelReportList:o},data:function(){return{bizType:""}},created:function(){this.bizType=this.$route.query.bizType}},u=Object(r.a)(c,function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("excel-report-list",{attrs:{"biz-type":this.bizType}}),this._v(" "),t("email-recipients",{attrs:{"biz-type":this.bizType}})],1)},[],!1,null,null,null);u.options.__file="EmailExcelView.vue";t.default=u.exports},Igha:function(e,t,i){},ssmy:function(e,t,i){"use strict";var a=i("Igha");i.n(a).a}}]);